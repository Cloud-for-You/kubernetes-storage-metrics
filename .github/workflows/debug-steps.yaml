name: Debugging steps
on:
  workflow_dispatch: {}

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Print all variable
        run: |
          ORGANIZATION_NAME=$(curl -s "https://api.github.com/repos/$GITHUB_REPOSITORY" | jq -r .organization.login)
          echo "Název organizace: $ORGANIZATION_NAME"
          REPO_NAME=${GITHUB_REPOSITORY#*/}
          echo "Název repozitáře: $REPO_NAME"
          echo "Cesta ke kořenu repozitáře: $GITHUB_WORKSPACE"

      - name: Docker meta
        id: meta
        uses: docker/metadata-action@v4
        with:
          images: |
            quay.io/cloud-for-you/kubernetes-storage-metrics
          tags: |
            type=ref,event=branch
            type=ref,event=pr
            type=semver,pattern={{version}}